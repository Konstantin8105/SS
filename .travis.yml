language: go
sudo: true

go:
  - tip

before_install:
  # install for test
  - go get -u -v github.com/bradleyjkemp/cupaloy

  # gocovmerge is used to merge all the separate unit/integration test coverage
  # profiles.
  - go get -u -v github.com/wadey/gocovmerge

  # install gometalinter
  # - go get -u github.com/alecthomas/gometalinter
  # - gometalinter --install

script:
  - . ./travis/travis.sh

after_success:
  - include_cov=coverage.txt bash <(curl -s https://codecov.io/bash)
  - rm -f coverage.txt

after_failure:
  # Print out the failures (removing a lot of the noise).
  - cat /tmp/out.txt
  - rm -f coverage.txt
